{% extends "base.html" %}
{% load static %}

<style>
  /* keep cells vertically centered */
  .table-shopping-cart th, .table-shopping-cart td { vertical-align: middle; }

  /* center the Quantity (2nd col) */
  .table-shopping-cart th:nth-child(2),
  .table-shopping-cart td:nth-child(2) { text-align: center; }

  /* center the Price (3rd col) */
  .table-shopping-cart th:nth-child(3),
  .table-shopping-cart td:nth-child(3) { text-align: center; }

  /* make the inner price block center nicely */
  .table-shopping-cart td:nth-child(3) .price-wrap {
    text-align: center;
    display: inline-block;   /* shrink to content so true centering works */
    margin: 0 auto;          /* center the block inside the td */
  }
</style>

{% block content %}

<section class="section-content padding-y bg">
<div class="container">

<!-- ============================ COMPONENT 1 ================================= -->

<div class="row">
	<aside class="col-lg-6">
<div class="card">
    <div class="card-body">
        <h4 class="card-title mb-4">Billing Address</h4>
<form action="{% url 'place_order' %}" method="post">
    {% csrf_token %}
    <div class="form-row">
        <div class="col form-group">
            <label for="first_name">First Name</label>
            <input type="text" name="first_name" id="first_name" class="form-control" required>
        </div>
        <div class="col form-group">
            <label for="last_name">Last Name</label>
            <input type="text" name="last_name" id="last_name" class="form-control" required>
        </div>
    </div>

    <div class="form-row">
        <div class="col form-group">
            <label for="email">Email Address</label>
            <input type="email" name="email" id="email" class="form-control" required>
        </div>
        <div class="col form-group">
            <label for="phone">Phone Number</label>
            <input type="text" name="phone" id="phone" class="form-control" required>
        </div>
    </div>

    <div class="form-row">
        <div class="col form-group">
            <label for="address_line_1">Address Line 1</label>
            <input type="text" name="address_line_1" id="address_line_1" class="form-control" required>
        </div>
        <div class="col form-group">
            <label for="address_line_2">Address Line 2</label>
            <input type="text" name="address_line_2" id="address_line_2" class="form-control">
        </div>
    </div>

    <div class="form-row">
        <div class="col form-group">
            <label for="city">City</label>
            <input type="text" name="city" id="city" class="form-control" required>
        </div>
        <div class="col form-group">
            <label for="state">District</label>
            <select name="state" id="state" class="form-control" required>
                <option value="">-- Select District --</option>
                <option>Bagerhat</option>
                <option>Bandarban</option>
                <option>Barguna</option>
                <option>Barisal</option>
                <option>Bhola</option>
                <option>Bogra</option>
                <option>Brahmanbaria</option>
                <option>Chandpur</option>
                <option>Chattogram</option>
                <option>Chuadanga</option>
                <option>Cox's Bazar</option>
                <option>Dhaka</option>
                <option>Dinajpur</option>
                <option>Faridpur</option>
                <option>Feni</option>
                <option>Gaibandha</option>
                <option>Gazipur</option>
                <option>Gopalganj</option>
                <option>Habiganj</option>
                <option>Jamalpur</option>
                <option>Jashore</option>
                <option>Jhalokati</option>
                <option>Jhenaidah</option>
                <option>Joypurhat</option>
                <option>Khagrachari</option>
                <option>Khulna</option>
                <option>Kishoreganj</option>
                <option>Kurigram</option>
                <option>Kushtia</option>
                <option>Lakshmipur</option>
                <option>Lalmonirhat</option>
                <option>Madaripur</option>
                <option>Magura</option>
                <option>Manikganj</option>
                <option>Meherpur</option>
                <option>Moulvibazar</option>
                <option>Munshiganj</option>
                <option>Mymensingh</option>
                <option>Naogaon</option>
                <option>Narayanganj</option>
                <option>Narsingdi</option>
                <option>Natore</option>
                <option>Netrokona</option>
                <option>Nilphamari</option>
                <option>Noakhali</option>
                <option>Pabna</option>
                <option>Panchagarh</option>
                <option>Patuakhali</option>
                <option>Pirojpur</option>
                <option>Rajbari</option>
                <option>Rajshahi</option>
                <option>Rangamati</option>
                <option>Rangpur</option>
                <option>Satkhira</option>
                <option>Shariatpur</option>
                <option>Sherpur</option>
                <option>Sirajganj</option>
                <option>Sunamganj</option>
                <option>Sylhet</option>
                <option>Tangail</option>
                <option>Thakurgaon</option>
            </select>
        </div>
        <div class="col form-group">
            <label for="country">Country</label>
            <input type="text" name="country" id="country" class="form-control" required value="Bangladesh">
        </div>
    </div>

    <div class="form-group">
        <label for="order_note">Order Notes</label>
        <textarea name="order_note" id="order_note" rows="3" class="form-control" placeholder="Additional instructions (optional)"></textarea>
    </div>

</div> <!-- card.// -->

	</aside> <!-- col.// -->
	<aside class="col-lg-6">
        <table class="table table-borderless table-shopping-cart">
        <thead class="text-muted">
        <tr class="small text-uppercase">
        <th scope="col">Product</th>
        <th scope="col" width="120" class="text-center">Quantity</th>
        <th scope="col" width="120" class="text-center">Price</th>
        <th scope="col" class="text-right" width="200"> </th>
        </tr>
        </thead>
        <tbody>

        {% for cart_item in cart_items %}
        <tr>
        <td>
            <figure class="itemside align-items-center">
            <div class="aside"><img src="{{ cart_item.product.images.url }}" class="img-sm"></div>
            <figcaption class="info">
                <a href="{{ cart_item.product.get_url }}" class="title text-dark">{{ cart_item.product.product_name }}</a>
                <p class="text-muted small">
                {% if cart_item.variations.all %}
                    {% for item in cart_item.variations.all %}
                    {{ item.variation_category|capfirst }} : {{ item.variation_value|capfirst }} <br>
                    {% endfor %}
                {% endif %}
                </p>
            </figcaption>
            </figure>
        </td>

        <td class="text-center align-middle">
            <span>{{ cart_item.quantity }}</span>
        </td>

        <!-- ✅ Price cell: centered + properly closed -->
        <td class="text-center align-middle">
            <div class="price-wrap">
            <var class="price">Tk.{{ cart_item.sub_total }}</var>
            <small class="text-muted">Tk.{{ cart_item.product.price }} each</small>
            </div>
        </td>

        <!-- ✅ keep column count aligned with the thead (4th, blank) -->
        <td></td>
        </tr>
        {% endfor %}
        </tbody>
        </table>        

        
			<hr>
			<p class="text-center mb-3">
				<img src="{% static './images/misc/payments.png' %}" height="26">
            </p>
            <button type="submit" name="submit" class="btn btn-primary btn-block">Place Order</button>
			<a href="{% url 'store' %}" class="btn btn-light btn-block">Continue Shopping</a>
		</div> <!-- card-body.// -->
		</div> <!-- card.// -->
    </form>
</aside> <!-- col.// -->


</div> <!-- row.// -->

<!-- ============================ COMPONENT 1 END .// ================================= -->

</div> <!-- container .//  -->
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->

{% endblock %}